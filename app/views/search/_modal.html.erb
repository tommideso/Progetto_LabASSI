<%= search_form_for @q, url: search_path, method: :get do |f| %>
  <div class="relative">
    <input type="text" id="searchInput" class="block w-full px-4 py-2 border rounded-lg" placeholder="Cerca...">
    <button id="openModalButton" class="absolute inset-y-0 right-0 flex items-center px-4 py-2 text-white bg-blue-500 rounded-r-lg">🔍</button>
  </div>

  <!-- Modale -->
  <div id="searchModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white p-6 rounded-lg shadow-lg w-11/12 md:w-1/3">
      <h2 class="text-lg font-bold mb-4">Filtra la tua ricerca</h2>
      <form>
        <!-- Aggiungi qui i tuoi campi di input -->
        <%= render "search/form" %>
    </form>
    </div>
  </div>
<%end%>


<script>
  document.addEventListener('DOMContentLoaded', () => {
    const searchInput = document.getElementById('searchInput');
    const searchModal = document.getElementById('searchModal');
    const closeModalButton = document.getElementById('closeModalButton');

    searchInput.addEventListener('input', () => {
      searchModal.classList.remove('hidden');
    });

    closeModalButton.addEventListener('click', () => {
      searchModal.classList.add('hidden');
    });

    // Chiudi il modale cliccando all'esterno di esso
    searchModal.addEventListener('click', (e) => {
      if (e.target === searchModal) {
        searchModal.classList.add('hidden');
      }
    });

    // Chiudi il modale alla sottomissione del form
    const form = searchModal.querySelector('form');
    form.addEventListener('submit', () => {
      searchModal.classList.add('hidden');
    });
  });
</script>